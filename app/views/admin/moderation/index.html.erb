<% content_for(:title) { "Moderacja | Panel admina" } %>

<div class="admin-page">
  <h1>Kolejka moderacji</h1>

  <%= render "admin/nav", current_page: "moderation" %>

  <% if @items.any? %>
    <table class="admin-table">
      <thead>
        <tr>
          <th>Typ</th>
          <th>Treść</th>
          <th>Powód</th>
          <th>Data</th>
          <th>Akcje</th>
        </tr>
      </thead>
      <tbody>
        <% @items.each do |item| %>
          <tr>
            <td><%= item.moderatable_type %></td>
            <td>
              <% if item.moderatable.is_a?(Post) %>
                <%= link_to truncate(item.moderatable.title, length: 50), post_path(item.moderatable) %>
              <% elsif item.moderatable.is_a?(Comment) %>
                <%= truncate(item.moderatable.body, length: 80) %>
              <% end %>
            </td>
            <td><%= item.reason %></td>
            <td><%= item.created_at.strftime("%Y-%m-%d %H:%M") %></td>
            <td>
              <%= button_to "Zatwierdź", approve_admin_moderation_path(item), method: :post, class: "admin-btn admin-btn-small admin-btn-success" %>
              <%= button_to "Odrzuć", reject_admin_moderation_path(item), method: :post, class: "admin-btn admin-btn-small admin-btn-danger" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p class="empty-message">Brak elementów do moderacji.</p>
  <% end %>
</div>
